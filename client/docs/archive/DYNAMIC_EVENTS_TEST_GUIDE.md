# Dynamic Events Hook 테스트 가이드

**작성일**: 2026-01-29  
**목적**: useCalendarDynamicEvents Hook 자동화 테스트

---

## 🎯 테스트 위치

**DebugScreen**:
- 경로: `Profile` → `Settings` → `Debug Screen`
- 버튼: "🎯 Dynamic Events Hook 전체 테스트"

---

## 📋 테스트 시나리오

### 자동 실행 순서:

1. **데이터 준비**
   - 주 데이터 생성 (18개월, 약 78주)
   - 첫 주/마지막 주 확인

2. **전체 todos 가져오기**
   - 캐시 확인 → 없으면 서버 요청
   - todos 개수 확인

3. **카테고리 가져오기**
   - 캐시 확인
   - 카테고리 개수 확인

4. **Hook 로직 시뮬레이션 (캐시 미스)**
   - visibleIndex: 30 (중간 지점)
   - range: ±3주
   - 계산 범위: 27 ~ 33 (총 7주)
   - 이벤트 계산 수행
   - 성능 측정

5. **성능 검증**
   - 목표: <10ms
   - 경고: 10~20ms
   - 실패: >20ms

6. **캐시 히트 시뮬레이션**
   - 캐시된 데이터 재사용
   - 성능 측정 (목표: <1ms)

7. **샘플 이벤트 출력**
   - 최대 5개 날짜
   - 각 날짜별 이벤트 2개씩 표시

8. **최종 결과 요약**
   - 계산 범위
   - 초기 계산 시간
   - 캐시 히트 시간
   - 이벤트 개수
   - 성능 목표 달성 여부

---

## ✅ 성공 기준

### 필수 조건:
- [ ] 데이터 생성 성공 (78주)
- [ ] todos 가져오기 성공
- [ ] 이벤트 계산 완료
- [ ] 성능 <10ms

### 권장 조건:
- [ ] 캐시 히트 <1ms
- [ ] 이벤트 최소 1개 이상
- [ ] 에러 없음

---

## 📊 예상 로그 출력

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 Dynamic Events Hook 테스트 시작
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1️⃣ 데이터 준비
  ✅ 주 데이터 생성: 78주
  - 첫 주: 2025-07-27 ~ 2025-08-02
  - 마지막 주: 2027-01-24 ~ 2027-01-30

2️⃣ 전체 todos 가져오기
  ✅ 캐시에서 가져옴: 15개

3️⃣ 카테고리 가져오기
  ✅ 카테고리: 5개

4️⃣ Hook 로직 시뮬레이션 - 캐시 미스
  - visibleIndex: 30
  - range: ±3주
  - 계산 범위: 27 ~ 33 (총 7주)
  ✅ 계산 완료: 5.23ms
  - 이벤트 있는 날짜: 12개
  - 총 이벤트: 18개

5️⃣ 성능 검증
  ✅ 성능 목표 달성: 5.23ms < 10ms

6️⃣ 캐시 히트 시뮬레이션
  ✅ 캐시 히트: 0.15ms
  ✅ 캐시 성능 우수: 0.15ms < 1ms

7️⃣ 샘플 이벤트 (최대 5개 날짜)
  2026-01-27: 3개
    - 매일 운동하기
    - 프로젝트 회의
  2026-01-28: 2개
    - 매일 운동하기
    - 독서 시간

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ Dynamic Events Hook 테스트 완료
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 요약:
  - 계산 범위: 7주
  - 초기 계산: 5.23ms
  - 캐시 히트: 0.15ms
  - 이벤트 날짜: 12개
  - 총 이벤트: 18개
  - 성능 목표: ✅ 달성
```

---

## 🐛 문제 해결

### 문제 1: "캐시에 todos 없음"
**원인**: 앱 최초 실행 또는 캐시 클리어  
**해결**: 
1. 서버 연결 확인
2. 로그인 상태 확인
3. 자동으로 서버에서 가져옴

### 문제 2: "이벤트 없음"
**원인**: 테스트 데이터 부족  
**해결**:
1. DebugScreen에서 "➕ 온라인 생성" 클릭
2. 여러 개 생성 (다양한 날짜)
3. 다시 테스트 실행

### 문제 3: "성능 미달 (>10ms)"
**원인**: 
- 너무 많은 todos (>100개)
- 복잡한 반복 일정
- 디바이스 성능

**해결**:
1. 범위 축소 (±3주 → ±2주)
2. 캐시 크기 증가
3. 반복 일정 최적화

### 문제 4: "테스트 실패"
**원인**: 코드 에러  
**해결**:
1. 콘솔 에러 확인
2. 로그 전체 확인
3. 필요시 캐시 클리어 후 재시도

---

## 🔄 다음 단계

테스트 성공 후:
1. TodoScreen에서 실제 동작 확인
2. 주간/월간 뷰 전환 테스트
3. 스크롤하며 이벤트 점 표시 확인
4. 성능 모니터링 (콘솔 로그)

---

**작성자**: Kiro AI  
**버전**: 1.0.0
