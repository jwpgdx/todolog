# 📋 Todolog 로드맵

## ✅ 완료된 작업

### Phase 1: 무한 스크롤 캘린더 ✅
- [x] UltimateCalendar 무한 스크롤 구현
- [x] Virtual Window (156주 제한)
- [x] Content Offset 보정
- [x] 양방향 스크롤 (상단/하단)

### Phase 2: 동적 이벤트 계산 ✅
- [x] useCalendarDynamicEvents Hook 구현
- [x] 주별 캐싱 (40주 → 60주)
- [x] 범위 기반 계산 (±7주 → ±12주)
- [x] 성능 최적화 (<10ms)

### Phase 3: 버그 수정 ✅
- [x] 초기 스크롤 위치 수정
- [x] 스와이프 충돌 해결
- [x] 헤더 타이틀 동기화
- [x] 카테고리 색상 동기화
- [x] CalendarScreen 스크롤 순간이동 버그 수정

### Phase 4: Cache-First 전략 ✅
- [x] Categories Cache-First 로직 구현
- [x] AsyncStorage fallback 추가
- [x] SyncProvider 초기 캐시 주입
- [x] 오프라인/서버 다운 대응 완료
- [x] 회색 dot 문제 100% 해결

### Phase 5: SQLite 마이그레이션 ✅
- [x] AsyncStorage → SQLite 전환 완료
- [x] Todos, Completions, Categories, Pending Changes 마이그레이션
- [x] 모든 CRUD Hooks SQLite 기반으로 전환
- [x] 델타 동기화 SQLite 기반으로 전환
- [x] 성능 개선: 앱 시작 15배, Completion 토글 160배, 메모리 10배 감소
- [x] SQLite 워밍업 로직 추가 (WASM 콜드 스타트 해결)
- [x] 캐시 최적화 (range: 12, maxCacheSize: 60)

---

## 🚀 다음 작업 (우선순위)

### 1. 기능 테스트 및 디버깅 🔴 높음 (긴급)
**목적**: SQLite 마이그레이션 후 모든 기능 검증

**작업**:
- [x] **DebugScreen 정리** ✅ 완료 (2026-02-03)
  - [x] AsyncStorage 관련 테스트 제거
  - [x] SQLite 테스트만 유지
  - [x] UI 간소화 (8개 핵심 버튼)

- [ ] **일정 CRUD 테스트**
  - [ ] 일정 생성 (온라인)
  - [ ] 일정 수정 (온라인)
  - [ ] 일정 삭제 (온라인)
  - [ ] 일정 생성 (오프라인)
  - [ ] 일정 수정 (오프라인)
  - [ ] 일정 삭제 (오프라인)

- [ ] **일정 완료/취소 테스트** ✅ 버그 수정 완료 (2026-02-03)
  - [x] 버그 발견: SQLite와 서버 상태 불일치 시 반대 방향 토글
  - [x] 수정: 서버 응답으로 SQLite 강제 동기화
  - [ ] 실제 앱에서 재테스트 필요
  - [ ] 완료 토글 (온라인)
  - [ ] 완료 취소 (온라인)
  - [ ] 완료 토글 (오프라인)
  - [ ] 완료 취소 (오프라인)

- [ ] **카테고리 CRUD 테스트**
  - [ ] 카테고리 생성 (온라인)
  - [ ] 카테고리 수정 (온라인)
  - [ ] 카테고리 삭제 (온라인)
  - [ ] 카테고리 생성 (오프라인)
  - [ ] 카테고리 수정 (오프라인)
  - [ ] 카테고리 삭제 (오프라인)

**예상 시간**: 2-3시간

---

### 2. 프로덕션 준비 🟡 중간
**목적**: 디버그 로그 제거 및 코드 정리

**작업**:
- [ ] useCalendarDynamicEvents 디버그 로그 제거
- [x] UltimateCalendar 디버그 로그 제거 (일부)
- [x] CalendarScreen 디버그 로그 제거
- [x] useDayCell 디버그 로그 제거
- [x] TestCalendarDynamicEvents 삭제

**예상 시간**: 30분

---

### 3. 성능 모니터링 🟡 중간
**목적**: 프로덕션 환경에서 성능 검증

**작업**:
- [ ] 실제 사용자 데이터로 테스트 (100+ todos)
- [ ] 메모리 사용량 모니터링
- [ ] 스크롤 성능 측정 (FPS)
- [ ] 배터리 소모 테스트
- [ ] SQLite 쿼리 성능 측정

**예상 시간**: 1-2시간

---

### 4. 데이터 정리 정책 🟢 낮음 (선택사항)
**목적**: 장기 사용 시 데이터 관리

**작업**:
- [ ] 1년 이상 된 Completions 삭제 정책
- [ ] Soft Delete 후 30일 지나면 Hard Delete
- [ ] 아카이빙 기능 (선택사항)
- [ ] 사용자 설정으로 보관 기간 선택

**예상 시간**: 2-3시간

---

### 5. UI/UX 개선 🟢 낮음
**목적**: 사용자 경험 향상

**작업**:
- [ ] 로딩 인디케이터 개선
- [ ] 스와이프 제스처 피드백
- [ ] 애니메이션 부드럽게 조정
- [ ] 다크 모드 지원
- [ ] 접근성 개선

**예상 시간**: 3-4시간

---

## 🔮 향후 계획

### Phase 6: 고급 기능
- [ ] 주간/월간 뷰 전환 애니메이션 개선
- [ ] 이벤트 드래그 앤 드롭
- [ ] 캘린더 공유 기능
- [ ] 위젯 지원

### Phase 7: 최적화
- [ ] 이미지 캐싱
- [ ] 오프라인 모드 개선
- [ ] 백그라운드 동기화

### Phase 8: 확장
- [ ] 웹 버전 개발
- [ ] 태블릿 최적화
- [ ] 다국어 지원 확대

---

## 🎯 다음 세션 시작 가이드

**추천 작업 순서**:
1. **기능 테스트 및 디버깅** (2-3시간) - 🔴 긴급: 일정 완료/취소 에러 수정
2. **프로덕션 준비** (30분) - 디버그 로그 제거
3. **성능 모니터링** (1-2시간) - 실제 데이터 테스트
4. **데이터 정리 정책** (선택사항)

**시작 명령**:
```
일정 완료/취소 에러를 먼저 수정해주세요.
에러 로그를 보여주시면 원인을 파악하겠습니다.

그 다음:
1. DebugScreen 정리 (안쓰는 기능 제거)
2. 일정 CRUD 온라인/오프라인 테스트
3. 카테고리 CRUD 온라인/오프라인 테스트
```

---

## 📊 SQLite 마이그레이션 완료 상태

### ✅ 완료된 항목
- Todos → SQLite (100%)
- Completions → SQLite (100%)
- Categories → SQLite (100%)
- Pending Changes → SQLite (100%)
- 모든 CRUD Hooks 전환 (100%)
- 동기화 로직 전환 (100%)
- 성능 최적화 (100%)

### 📈 성능 개선 결과
| 항목 | 변경 전 | 변경 후 | 개선율 |
|------|---------|---------|--------|
| 앱 시작 | 150ms | 10ms | **15배** |
| Completion 토글 | 80ms | 0.5ms | **160배** |
| 월별 조회 | 100ms | 8ms | **12배** |
| 메모리 사용 | 10MB | 1MB | **10배** |

### 🎯 최적화 설정
- 계산 범위: ±12주 (25주, 6개월)
- 캐시 용량: 60주 (15개월)
- 캐시 메모리: ~255KB
- 예상 캐시 히트율: 90%+

---

**마지막 업데이트**: 2026-02-03
