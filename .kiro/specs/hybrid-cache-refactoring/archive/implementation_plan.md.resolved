# 하이브리드 캐시 전략 리팩토링

onMutate(Optimistic Update) 유지 + onSuccess를 `invalidateQueries(['todos'])` 한 줄로 단순화.

## Proposed Changes

### Hook Layer (onSuccess 단순화)

---

#### [MODIFY] [useToggleCompletion.js](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useToggleCompletion.js)

- **onSuccess (L110-134):** [predicate](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useDeleteTodo.js#150-156) 기반 무효화 → `invalidateQueries({ queryKey: ['todos'] })` 한 줄로 교체
- console.log 정리 (performance 측정 유지, 디버그용 제거)

#### [MODIFY] [useCreateTodo.js](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useCreateTodo.js)

- **UUID 이중 생성 수정:** [onMutate](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useDeleteTodo.js#13-78)(L34)와 [mutationFn](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useUpdateTodo.js#141-227)(L92) 각각 `generateId()` 호출 → [mutationFn](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useUpdateTodo.js#141-227)에서만 생성하고 context로 전달
- **onSuccess (L147-218):** ID 교체/카테고리 교체 로직 30줄 → `invalidateQueries` + AsyncStorage 저장만 유지
- console.log 정리

#### [MODIFY] [useDeleteTodo.js](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useDeleteTodo.js)

- **onSuccess (L140-165):** predicate/분기 로직 → `invalidateQueries({ queryKey: ['todos'] })` 한 줄
- console.log 정리

#### [MODIFY] [useUpdateTodo.js](file:///Users/admin/Documents/github/todo/client/src/hooks/queries/useUpdateTodo.js)

- **디버그 코드 삭제 (L201-213):** completions 테이블 전체 덤프
- **onSuccess (L227-320):** 복잡한 setQueryData/predicate → `invalidateQueries({ queryKey: ['todos'] })` 한 줄
- console.log 정리

## Verification Plan

### Manual Verification
- 각 훅의 onSuccess가 2~3줄인지 확인
- onMutate의 Optimistic Update 로직은 그대로 보존되었는지 확인
